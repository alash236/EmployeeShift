<mat-tab-group>


  <mat-tab label="å…¨é«”é€šçŸ¥">
    <div class="notice-board">

      <!-- æ¨™é¡Œåˆ— -->
      <div class="notice-header-bar">
        <h2 class="notice-title">ğŸ“¢ é€šçŸ¥ä½ˆå‘Šæ¬„</h2>
        <button mat-raised-button color="primary" (click)="showAddDialog()">æ–°å¢é€šçŸ¥</button>
      </div>

      <!-- æœå°‹åˆ— -->
      <div class="notice-filter-bar">
        <div class="date-filter">
          <label>é–‹å§‹æ—¥æœŸï¼š</label>
          <input type="date" (change)="searchDate()" [(ngModel)]="filterStartDate">
        </div>

        <div class="date-filter">
          <label>çµæŸæ—¥æœŸï¼š</label>
          <input type="date" (change)="searchDate()" [(ngModel)]="filterEndDate">
        </div>

        @if(isDateError){
          <div class="date-error">
            é–‹å§‹æ—¥æœŸä¸èƒ½å¤§æ–¼çµæŸæ—¥æœŸ
          </div>
        }
      </div>

      <!-- é€šçŸ¥æ¸…å–® -->
      @for(notify of notifyList; track $index; let index = $index){
        @if(!notify.publish){
          <div class="notice-item clickable" (click)="showEditDialog(notify.id)">
            <div class="notice-header">
              <label class="notice-content">{{notify.title}}</label>
            </div>
            <p class="notice-message">{{notify.message}}</p>
            <label class="notice-link" (click)="routerUrl($event,notify.linkUrl)">{{notify.linkUrl}}</label>
            <span class="notice-date">{{notify.createdDate}}</span>
          </div>
        }@else {
          <div class="notice-item published">
            <div class="notice-header">
              <label class="notice-content">{{notify.title}}</label>
              <mat-icon class="publish-icon">check_circle</mat-icon>
            </div>
            <p class="notice-message">{{notify.message}}</p>
            <label class="notice-link" (click)="routerUrl($event,notify.linkUrl)">{{notify.linkUrl}}</label>
            <span class="notice-date">{{notify.createdDate}}</span>
          </div>
        }
      }

    </div>
  </mat-tab>

  <mat-tab label="å“¡å·¥å€‹äººé€šçŸ¥">
    <div class="notice-board personal-notice-board">

      <!-- æ¨™é¡Œåˆ— -->
      <div class="notice-header-bar">
        <h2 class="notice-title">ğŸ‘¤ å“¡å·¥å€‹äººé€šçŸ¥</h2>
        <button mat-raised-button color="accent" (click)="showEmployeeNotifyAddDialog()">
          æ–°å¢å€‹äººé€šçŸ¥
        </button>
      </div>

      <!-- æœå°‹åˆ— -->
      <div class="notice-filter-bar">
        <div class="date-filter">
          <label>é–‹å§‹æ—¥æœŸï¼š</label>
          <input type="date" (change)="searchEmployeeDate()" [(ngModel)]="filterStartDate">
        </div>

        <div class="date-filter">
          <label>çµæŸæ—¥æœŸï¼š</label>
          <input type="date" (change)="searchEmployeeDate()" [(ngModel)]="filterEndDate">
        </div>

        @if(isEmployeeDateError){
          <div class="date-error">é–‹å§‹æ—¥æœŸä¸èƒ½å¤§æ–¼çµæŸæ—¥æœŸ</div>
        }
      </div>

      <!-- é€šçŸ¥æ¸…å–® -->
      <div class="personal-notice-list">
        @for (notify of employeeNotifyList; track $index; let index = $index) {
          <div class="personal-notice-item" (click)="showEmployeeNotifyUpdateDialog(notify.id)">
            <div class="personal-notice-header">
              <div class="personal-notice-info">
                <span class="employee-name">{{ notify.employeeId }}</span>
                <span class="notify-title">{{ notify.title }}</span>
              </div>
            </div>

            <p class="notify-message">{{ notify.message }}</p>

            @if (notify.linkUrl) {
              <label class="notify-link" (click)="routerUrl($event, notify.linkUrl)">
                 {{ notify.linkUrl }}
              </label>
            }

            <div class="notify-meta">
              <span class="notify-date">{{ notify.createdDate }}</span>
            </div>
          </div>
        }
      </div>

    </div>
  </mat-tab>

</mat-tab-group>
